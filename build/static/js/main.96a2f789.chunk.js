(this.webpackJsonpMonso=this.webpackJsonpMonso||[]).push([[0],{33:function(e,n,t){},47:function(e,n,t){"use strict";t.r(n);var c=t(34),r=t(16),o=t(14),i=t(11),s=t(8),l=(t(33),t(35));var u=["#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#5373E6","#369EFF","#02B1CC","#11B3A3","#39B178","#55B467","#FF802B"];function a(e){return u[e%u.length]}var d=t(9),j=s.memo((function(e){var n=e.points,t=e.isComplete,c=e.color,r=function(e){if(!e.length)return"";var n=e.reduce((function(e,n,t,c){var r=Object(i.a)(n,2),o=r[0],s=r[1],l=Object(i.a)(c[(t+1)%c.length],2),u=l[0],a=l[1];return e.push(o,s,(o+u)/2,(s+a)/2),e}),["M"].concat(Object(o.a)(e[0]),["Q"]));return n.push("Z"),n.join(" ")}(Object(l.a)(n,{size:12,thinning:.5,streamline:.6,smoothing:.7,last:t}));return Object(d.jsx)("g",{fill:c,children:Object(d.jsx)("path",{className:"canvas-line",d:r,fill:t?"black":c})})})),b=s.memo((function(e){var n=e.cursor,t=e.connectionId,c=e.isActive;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("circle",{cx:n.x,cy:n.y,r:4,fill:c?a(t):"grey"})})})),p=s.memo((function(e){var n=e.connectionId,t=e.user,c=e.isSelf,r=e.index;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("circle",{cx:32+16*r,cy:32,r:16,strokeWidth:2,stroke:"white",fill:t.isActive?a(n):"grey"},n+"_token"),c&&Object(d.jsx)("circle",{cx:32+16*r,cy:56,r:4,fill:a(n)})]})}));var v=new Date;v.setUTCHours(0,0,0,0);v.getTime();function f(e,n){return[e,n+0]}function O(){var e=Object(r.useList)("lines");return null==e?Object(d.jsx)("div",{children:"Loading"}):Object(d.jsx)(h,{lines:e})}function h(e){var n=e.lines,t=Object(r.useOthers)(),c=Object(r.useSelf)(),l=Object(r.useMyPresence)(),u=Object(i.a)(l,2),v=u[0],O=u[1],h=Object(r.useUndo)(),x=Object(r.useRedo)(),m=Object(r.useBatch)();!function(){var e=Object(r.useUndo)(),n=Object(r.useRedo)();s.useEffect((function(){function t(t){switch(t.key){case"z":if(t.ctrlKey||t.metaKey){t.shiftKey?n():e();break}}}return document.body.addEventListener("keydown",t),function(){document.body.removeEventListener("keydown",t)}}),[e,n])}();var k=s.useCallback((function(){m((function(){for(;n.length>0;)n.delete(0)}))}),[n]),g=s.useCallback((function(e){e.currentTarget.setPointerCapture(e.pointerId),O({points:[f(e.clientX,e.clientY)]})}),[v,O]),y=s.useCallback((function(e){var n=f(e.clientX,e.clientY);e.currentTarget.hasPointerCapture(e.pointerId)&&O({points:[].concat(Object(o.a)(v.points),[n])}),O({cursor:{x:n[0],y:n[1]}})}),[v,O]),C=s.useCallback((function(e){e.currentTarget.releasePointerCapture(e.pointerId),n.push({id:Date.now().toString(),points:v.points}),O({points:[]})}),[n,O,v]),I=s.useReducer((function(e){return!e}),!1),B=Object(i.a)(I,2),P=(B[0],B[1]);return s.useEffect((function(){var e=setInterval(P,30);return function(){return clearInterval(e)}}),[]),Object(d.jsxs)("div",{className:"canvas-container",children:[Object(d.jsxs)("svg",{className:"canvas-layer",onPointerDown:g,onPointerMove:y,onPointerUp:C,onPointerEnter:function(){return O({isActive:!0})},onPointerLeave:function(){return O({isActive:!1,cursor:null})},children:[Object(d.jsxs)("g",{transform:"translate(0, -".concat(0,")"),children:[c&&v.points&&v.points.length>2&&Object(d.jsx)(j,{points:v.points,color:a(c.connectionId),isComplete:!1},"draft"),n.map((function(e){return Object(d.jsx)(j,{points:e.points,isComplete:!0,color:"black"},e.id)})),t.map((function(e){var n;return null==(null===(n=e.presence)||void 0===n?void 0:n.points)||e.presence.points.length<2?null:Object(d.jsx)(j,{points:e.presence.points,isComplete:!1,color:a(e.connectionId)},"draft_"+e.connectionId)})),t.map((function(e){return null==e.presence||null==e.presence.cursor?null:Object(d.jsx)(b,{cursor:e.presence.cursor,isActive:!0,connectionId:e.connectionId},e.connectionId)}))]}),t.toArray().map((function(e,n){return null==e.presence?null:Object(d.jsx)(p,{connectionId:e.connectionId,user:e.presence,index:n+1,isSelf:!1},e.connectionId)})),c&&Object(d.jsx)(p,{connectionId:null===c||void 0===c?void 0:c.connectionId,user:v,index:0,isSelf:!0},null===c||void 0===c?void 0:c.connectionId)]}),Object(d.jsxs)("div",{className:"canvas-controls",children:[Object(d.jsx)("button",{onClick:h,children:"Undo"}),Object(d.jsx)("button",{onClick:x,children:"Redo"}),Object(d.jsx)("button",{onClick:k,children:"Clear"})]}),Object(d.jsxs)("div",{className:"author",children:["by Kish Parikh - using Typescript, React, and ",Object(d.jsx)("a",{href:"https://liveblocks.io",target:"_blank",children:"LiveBlocks"})]})]})}t(17),t(51),t(50);var x=t(31),m=Object(x.createClient)({publicApiKey:"pk_live_wFCGkcqXzANe-yuJQvmhqQZd"}),k=document.getElementById("root");Object(c.render)(Object(d.jsx)(r.LiveblocksProvider,{client:m,children:Object(d.jsx)(r.RoomProvider,{id:"Monso",children:Object(d.jsx)(O,{})})}),k)}},[[47,1,2]]]);
//# sourceMappingURL=main.96a2f789.chunk.js.map